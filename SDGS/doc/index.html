<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1253">
   <meta name="Author" content="Harris Georgiou">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (Win98; I) [Netscape]">
   <title>SNS - Help page</title>
</head>
<body>

<center>
<h1>
S.D.G.S. - Simple Distributed Group Service (Java/RMI)</h1></center>
Χάρης Γεωργίου
<p><i>Πανεπιστήμιο Αθηνών - Τμήμα Πληροφορικής,</i>
<br><i>Μεταπτυχιακό Πρόγραμμα Σπουδών,</i>
<br><i>Τομέας Επεξεργασίας Σήματος &amp; Υπολογιστικών Συστημάτων</i>
<br>&nbsp;
<p>
<hr WIDTH="100%">
<br>&nbsp;
<h2>
Εισαγωγή</h2>
Η παρούσα σελίδα περιγράφει τη δομή και τη λειτουργία της εφαρμογής SDGS
που παρουσιάζει τον τρόπο χρήσης του RMI (Remote Method Invocation) της
Java, για την κατασκευή μιας απλής κατανεμημένης υπηρεσίας σε μορφή ομάδας
εξυπηρετών (server group).
<h2>
1.&nbsp; Γενική Περιγραφή</h2>
Η εφαρμογή SDGS αποτελεί παράδειγμα χρήσης τεχνικών RMI (Remote Method
Invocation) για την υλοποίηση μιας απλής distributed group service που
λειτουργεί ως distributed database για δεδομένα μορφής key-value pairs.
Η εφαρμογή δουλεύει σύμφωνα με το μοντέλο client-server και η βασική λειτουργία
που υπηστηρίζει είναι η εξής:
<blockquote>
<ul>
<li>
<b>lookup </b>( keyID )</li>
</ul>
</blockquote>
Η παραπάνω λειτουργία χρησιμοποιείται από clients για επικοινωνία με την
ομάδα των εξυπηρετών και την ανάκτηση (αν υπάρχει) της εγγραφής με το συγκεκριμένο
keyID. Η βασική ιδέα της υπηρεσίας είναι να επιτρέπει την επικοινωνία των
clients με το service group για την εύρεση των ζητούμενων δεδομένων, ενεργοποιώντας
έναν ή περισσότερους server της ομάδας και αναζήτηση στην τοπική ΒΔ του
κάθε ενός, και τελικά ανάκτηση των δεδμένων από κάποιον που τα έχει διαθέσιμα,
ή καθολική αποτυχία αν δεν μπορούν να εντοπιστούν σε κανέναν από τους ενεργούς
servers. Η συγκεκριμένη λειτουργία υλοποιείται έτσι ώστε να είναι διαφανής
(για το πρόγραμμα του client) ως προς τη διαχείριση επικοινωνίας με
<br>πολλαπλούς servers και ως προς την κατανομή της ΒΔ.
<br>&nbsp;
<h2>
2. Λειτουργία</h2>

<h3>
2.1 Μοντέλο Κατανομής</h3>
Για την κατασκευή της υπηρεσίας SDGS χρησιμοποιούνται τεχνικές RMI για
την απομακρυσμένη πρόσβαση στις λειτουργίες της υπηρεσίας από clients.
Κύριο ζητούμενο για την υπηρεσία είναι η δυνατότητα χρήσης πολλαπλών servers
με τους οποίους κάθε client θα επικοινωνεί τυχαία για την αναζήτηση δεδομένων
από τη συνολική ΒΔ.Την αναζήτηση δεδομένων στην κατανεμημένη ΒΔ θα πρέπει
να αναλαμβάνει είτε ο client (στέλνοντας επιμέρους αιτήσεις σε κάθε server),
είτε από κοινού από τους servers κατά τη λήψη μιας αίτησης.
<br>Για την υλοποίηση της κατανομής και τη διαχείριση της ομάδας σχεδιάστηκαν
δύο μοντέλα κατανομής. Το πρώτο αφορούσε την επικοινωνία του client τυχαία
με κάποιον από τους servers για την αποστολή της αίτησης στην ομάδα. Στη
συνέχεια ο συγκεκριμένος server αναζητά στην τοπική ΒΔ και επιστρέφει το
αποτέλεσμα αν βρέθηκε, ή προωθεί την αίτηση με τυχαία επιλογή ενός server
(κάθε φορά) από τους υπόλοιπους της ομάδας. Οι προωθήσεις αιτήσεων μεταξύ
των υπόλοιπων servers δεν επιτρέπονται για την αποφυγή συμφόρησης του δικτύου.
Τελικά ο αρχικός server λαμβάνει θετική απάντηση από κάποιο άλλο server
της ομάδας ή αναφέρει καθολική αποτυχία στον αιτούμενο client. Σε κάθε
φάση της διαδικασίας εξυπηρέτησης της αίτησης η επικοινωνία του client
με την ομάδα γίνεται μέσω του server που έλαβε την αρχική αίτηση, δηλαδή
η διαχείριση της κατανομής γίνεται αποκλειστικά εντός της ομάδας.
<br>Το δεύτερο μοντέλο κατανομής αφορούσε στην διαχείριση της κατανομής
από τον client. Κάθε client είναι ενημερωμένος για τα μέλη της ομάδας και
αποφασίζει ο ίδιος (με τυχαίο και πάλι τρόπο) σε ποιον θα αποστείλλει την
αίτηση. Σε περίπτωση αρνητικής απάντησης ή αποτυχίας η διαδικασία επαναλαμβάνεται
με τους υπόλοιπους servers, μέχρι να ληφθεί η πρώτη θετική απάντηση ή να
αποτύχουν όλοι οι διαθέσιμοι servers. Σε αυτή την περίπτωση κάθε server
λειτουργεί απολύτως αυτόνομα σε κάθε φάση της διαδικασίας, αφού η επιλογή
του κόμβου προορισμού και η διαχείριση των πολλαπλών απαντήσεων γίνεται
από τον ίδιο τον client.
<br>Από τις δύο δυνατές επιλογές υιοθετήθηκε το μοντέλο διαχείρισης της
κατανομής από client (2ο μοντέλο). Αν και στις δύο περιπτώσεις ο όγκος
κίνησης μηνυμάτων στο δίκτυο είναι γενικά ο ίδιος, το πρώτο μοντέλο προσφέρει
απλότητα στην υλοποίηση του client με κόστος στην πολυπλοκότητα συντονισμού
της ομάδας. Επιπλέον, κατά την επεξεργασία των αιτήσεων ο server που λαμβάνει
την αρχική αίτηση λειτουργεί ως συντονιστής για την προώθηση της αίτησης
στους υπόλοιπους servers. Η παράμετρος αυτή, καθώς και το γεγονός ότι η
(τυχαία) επιλογή και η διαχείριση αποτυχιών επικοινωνίας γίνεται εντός
της ομάδας, έχει σαν αποτέλεσμα το μοντέλο αυτό να είναι δύσκολα κλιμακούμενο
(πολλοί servers ή πολλοί clients) και ευάλωτο στην περίπτωση αποτυχίας
του αρχικού server (συντονιστή). Από την άλλη πλευρά, το δεύτερο μοντέλο,
αν και επιβαρύνει το πρόγραμμα του client, διατηρεί την υπηρεσία βιώσιμη
και αποδοτική σε κάθε περίπτωση (αποτυχία clients ή servers), αφού όλες
οι επικοινωνίες είναι αυστηρά point-to-point χωρίς συντονιστή και χωρίς
κανένα συντονισμό μεταξύ των servers (η ΒΔ θεωρείται read-only). Έτσι κάθε
server επεξεργάζεται αιτήσεις που αφορούν αποκλειστικά την τοπική ΒΔ, ενώ
η αποχώρησή του από την ομάδα δεν προκαλεί κανένα πρόβλημα (καθυστερήσεις
λόγω timeouts) εντός της ομάδας αλλά τους αιτούμενους clients. Το κόστος
κλιμάκωσης μεταφέρεται εκτός της ομάδας στους clients, οι οποίοι όμως μπορούν
στην περίπτωση που υπάρχουν πάρα πολλοί διαθέσιμοι servers να διατηρούν
ιδιωτική λίστα με επιλογή μέρους της ομάδας, έτσι ώστε η αναζήτηση να μην
γίνεται σε όλους τους διαθέσιμους servers αλλά σε μερικούς από αυτούς (αν
και κάτι τέτοιο συνήθως δεν είναι σκόπιμο σε ένα γνήσιο κατανεμημένο σύστημα).
<br>&nbsp;
<h3>
2.2 Κατανεμημένη Βάση Δεδομένων</h3>
Η ΒΔ θεωρείται στατική και κάθε τοπική ΒΔ μεταφέρεται στη μνήμη του κάθε
server όπου γίνονται οι αναζητήσεις. Ως πρότυπο εγγραφών δεδομένων χρησιμοποιείται
το κλασικό key-value pair σχήμα, ενώ όλες οι αναζητήσεις γίνονται με βάση
το κλειδί (keyID) της κάθε εγγραφής.
<br>&nbsp;
<h2>
3. Υλοποίηση</h2>

<h3>
3.1 Δομή Κώδικα</h3>
Ο κώδικας της εφαρμογής αποτελείται από δύο σύνολα πηγαίων αρχείων. Το
πρώτο αφορά τον κώδικα των servers και το δεύτερο τον κώδικα των clients.
Τα αρχεία που χρησιμοποιούνται από κοινού προσαρτώνται κατά σύμβαση στον
κώδικα του server για να είναι ευκολότερη η ενημέρωσή τους, μια και η εξάρτηση
του πρόγράμματος του server από αυτά είναι μεγαλύτερη σε σχέση με το πρόγραμμα
του client.
<blockquote>
<blockquote>&nbsp;
<br><tt>SDGS Client Package</tt>
<br><tt>-------------------</tt>
<br><tt>SDGSclient.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
κύριο πρόγραμμα client</tt>
<br><tt>SDGStimeout.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
παράμετροι επικοινωνίας για τον client</tt>
<br><tt>(SDGSexception)</tt>
<br><tt>(SDGSnotFoundException)</tt>
<br><tt>(SDGSkey)</tt>
<br><tt>(SDGSvalue)</tt>
<br><tt>(SDGSrecord)</tt>
<br><tt>(SDGSlist)</tt>
<br><tt>(SDGSremote)</tt>
<br><tt>(SDGSserver_Stub)</tt>
<br><tt>[SDGSlist.cfg]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
λίστα διαθέσιμων servers</tt>
<br>&nbsp;
<p><tt>SDGS Server Package</tt>
<br><tt>-------------------</tt>
<br><tt>SDGSserver.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
κύριο πρόγραμμα server</tt>
<br><tt>SDGSsettings.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ρυθμίσεις αρχικοποίησης server</tt>
<br><tt>SDGSlist.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
διαχείριση λίστας διαθέσιμων servers</tt>
<br><tt>SDGSdatabase.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
διαχείριση (τοπικής) ΒΔ</tt>
<br><tt>SDGSkey.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
πεδίο keyID σε εγγραφές της ΒΔ</tt>
<br><tt>SDGSvalue.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
πεδίο value σε εγγραφές της ΒΔ</tt>
<br><tt>SDGSrecord.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
εγγραφή ΒΔ (SDGSkey+SDGSvalue)</tt>
<br><tt>SDGSremote.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
remote interface για τον server ('lookup(...)')</tt>
<br><tt>SDGSexception.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
γενικό exception για την εφαρμογή</tt>
<br><tt>SDGSnotFoundException.java&nbsp;&nbsp;&nbsp;&nbsp; exception για
αποτυχία αναζήτησης στη ΒΔ</tt>
<br><tt>(SDGSserver_Skel)</tt>
<br><tt>[SDGSserver.ini]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
παράμετροι αρχικοποίησης server</tt>
<br><tt>[SDGSlist.cfg]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
λίστα διαθέσιμων servers</tt>
<br><tt>[SDGSdatabase.dat]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
αρχείο ΒΔ</tt>
<br><tt>[SDGSserver.cfg]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
τρέχουσα διαμόρφωση server</tt>
<br>&nbsp;</blockquote>
</blockquote>
Στο παραπάνω σχήμα αναφέρονται τα επιμέρους αρχεία που αποτελούν το πακέτο
προγραμμάτων για την εφαρμογή του client και του server. Τα αρχεία *.java
είναι ο πηγαίος κώδικας, τα αρχεία σε παρενθέσεις είναι μεταγλωττισμένα
(*.class), ενώ τα αρχεία σε αγκύλες είναι αρχεία κειμένου που χρησιμοποιούνται
από τα προγράμματα. Τα δύο αρχεία "SDGSserver_Stub" και "SDGSserver_Skel"
δημιουργούνται αυτόματα από τον RMI interfaces compiler της Java για την
υλοποίηση του RMI interface. Εκτός των αρχείων "SDGSclient" και "SDGStimeout"
που αναφέρονται αποκλειστικά στο πρόγραμμα του client, όλα τα υπόλοιπα
θεωρούνται ότι ανήκουν στο πακέτο του server. Το αρχείο "SDGSlist.cfg"
περιλαμβάνει τα αναγνωριστικά ονόματα των servers της ομάδας και η διαχείρισή
του γίνεται από το αντίστοιχο module ("SDGSlist"). Το πρόγραμμα του client
το χρησιμοποιεί για να εντοπίσει τους servers και το πρόγραμμα του server
για να επιλέξει κατά την εκκίνηση ένα διαθέσιμο αναγνωριστικό όνομα κατά
την καταχώρισή του στο RMIregistry.
<br>&nbsp;
<h3>
3.2 Πρόγραμμα Client</h3>
Κάθε client που επιθυμεί να επικοινωνήσει με την υπηρεσία διαβάζει τη λίστα
με τους διαθέσιμους servers από το αρχείο SDGSlist.cfg και επιλέγει τυχαία
έναν από αυτούς. Στη συνέχεια εντοπίζει τον κόμβο προορισμού μέσω του RMIregistry
μέσω του αναγνωριστικού ονόματος του server και τελικά αποστέλλει την αίτησή
του. Σε περίπτωση αρνητικής απάντησης ή αποτυχίας δοκιμάζει με την ίδια
διαδικασία να επικοινωνήσει με κάποιον από τους υπόλοιπους servers. Τελικά
λαμβάνει θετική απάντηση, αν υπάρχει ενεργός server στην ομάδα που να έχει
στην τοπική του ΒΔ τα ζητούμενα δεδομένα, ή αναφέρει καθολική αποτυχία
αν τα δεδομένα δεν υπάρχουν πουθενά ή όλοι οι servers είναι ανενεργοί.
<br>&nbsp;
<h3>
3.3 Πρόγραμμα Server</h3>
Κάθε κόμβος της ομάδας εκτελεί ένα αντίγραφο του προγράμματος server. Επειδή
κάθε ενεργός server θα πρέπει να καταχωρείται στο RMI registry με μοναδικό
αναγνωριστικό, θα πρέπει να υπάρχει κάποιος υποτυπώδης συντονισμός κατά
την εκκίνηση του κάθε server έτσι ώστε να εξασφαλιστεί ότι κάθε ένας αναφέρεται
στο registry με διαφορετικό όνομα. Αυτό γίνεται μέσω του SDGSlist, το οποίο
διαβάζεται και στη συνέχεια ο τρέχον server ελέγχει μέσω του registry ποια
από τα ονόματα είναι δεσμευμένα και χρησιμοποιεί το πρώτο διαθέσιμο. Το
τρέχον αναγνωριστικό, ο τρέχον κόμβος του δικτύου και η διαμόρφωση της
ομάδας (τοπική ή κατανεμημένη) αποθηκεύονται στο αρχείο διαμόρφωσης του
συγκεκριμένου server.
<br>Για την εκκίνηση μιας ολόκληρης ομάδας από servers είναι διαθέσιμες
δύο διαμορφώσεις. Η πρώτη διαμόρφωση επιτρέπει την εκκίνηση πολλαπλών servers
στον ίδιο κόμβο και να εκκινηθούν στον ίδιο αρχικό κατάλογο, με την ομάδα
να λειτουργεί σαν μια εννοιαία multi-processes υπηρεσία, με πολλαπλά αντίγραφα
της ίδιας βασικής υπηρεσίας στο ίδιο μηχάνημα. Η δεύτερη διαμόρφωση αφορά
στην εκκίνηση πολλαπλών servers σε διαφορετικούς κόμβους του δικτύου, χρησιμοποιώντας
κοινό registry για την εγγραφή της ομάδας και τη διαχείριση των μελών.
Ο καθορισμός της διαμόρφωσης της ομάδας, καθώς και τη διεύθυνση του κόμβου
και του port number για το καθολικό registry στην περίπτωση κατανεμημένης
διαμόρφωσης, γίνεται μέσω του αρχείου "SDGSserver.ini". Η διαχείριση γίνεται
μέσω του SDGSsettings σε κάθε αντίγραφο του προγράμματος με κοινό αρχείο
διαμόρφωσης, έτσι ώστε να είναι δυνατός ο συντονισμός τους (όπως και με
το SDGSlist) κατά την εκκίνηση των προγραμμάτων.
<br>Για να είναι δυνατός ο πλήρης διαχωρισμός των servers ακόμα και στην
περίπτωση της τοπικής ομάδας, εκτός των αρχείων SDGSlist.cfg και SDGSserver.ini,
τα αρχεία κάθε server (ΒΔ και τρέχουσας διαμόρφωσης) αποθηκεύονται σε ξεχωριστό
κατάλογο με το όνομα του αναγνωριστικού του server (π.χ. "server1") στο
path εκκίνησης. Έτσι πολλαπλοί servers μπορούν να εκκινηθούν από τον ίδιο
αρχικό κατάλογο και ταυτόχρονα ο καθένας να χρησιμοποιεί ιδιωτικά αρχεία,
κάτι απαραίτητο στην περίπτωση υλοποίησης μιας πραγματικά κατανεμημένης
ΒΔ. Στην περίπτωση κατανεμημένης διαμόρφωσης κάτι τέτοιο είναι απαραίτητο
και κάθε server χρησιμοποιεί τον αρχικό κατάλογο εκκίνησής του ως working
path.
<br>&nbsp;
<h3>
3.4 Διασύνδεση &amp; Εγκατάσταση</h3>
Η εφαρμογή αποτελείται από το πρόγραμμα του server και το πρόγραμμα του
client. Για τη σωστή διασύνδεση και λειτουργία των προγραμμάτων προτείνεται
η παρακάτω διαδικασία μεταγλώττισης:
<blockquote>α) Μεταγλώττιση προγράμματος server:
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; javac *.java</tt>
<br>β) Δημιουργία αρχείων stub και skeleton:
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; rmic SDGSserver</tt>
<br>γ) Αντιγραφή απαραίτητων αρχείων στον client:
<br><tt>&nbsp;&nbsp;&nbsp; copy *.class:&nbsp; SDGSexception, SDGSnotFoundException,
SDGSkey, SDGSvalue, SDGSrecord,</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SDGSremote, SDGSlist, SDGSserver_Stub</tt>
<br>δ) Μεταγλώττιση προγράμματος client:
<br><tt>&nbsp;&nbsp;&nbsp; /cli:&nbsp; javac *.java</tt>
<br>ε) Καθορισμός διαμόρφωσης της ομάδας:
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; vi SDGSserver.ini&nbsp;&nbsp;&nbsp;
(reglocal,reghost,regport)</tt>
<br>στ) Διαμόρφωση λίστας ενεργών servers:
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; vi SDGSlist.cfg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(serverID names)</tt>
<br>ζ) Διαμόρφωση αρχείου ΒΔ:
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; vi SDGSdatabase.dat&nbsp; (keyID-value
pairs)</tt>
<br>η) Διαμόρφωση καταλόγων εκτέλεσης τοπικών servers (μόνο για τοπική
διαμόρφωση):
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; md xxxxx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(xxxxx = serverID)</tt>
<br>θ) Διαμόρφωση ξεχωριστών ΒΔ για κάθε τοπικό server (μόνο για τοπική
διαμόρφωση):
<br><tt>&nbsp;&nbsp;&nbsp; /svr:&nbsp; vi xxxxx/SDGSdatabase.dat</tt></blockquote>

<h3>
3.5 Εκτέλεση</h3>
Για τη σωστή λειτουργία του RMI registry θα πρέπει το πρόγραμμα rmiregistry
να εκτελεστεί από τον κατάλογο που βρίσκεται το πρόγραμμα του server. Στη
συνέχεια μπορεί να ξεκινήσει το πρόγραμμα του server. Εμφανίζεται η τρέχουσα
διεύθυνση και θύρα και κατασκευάζεται το αρχείο διαμόρφωσης SDGSserver.cfg
για τον συγκεκριμένο server, στον τρέχον κατάλογο εκκίνησης (κατανεμημένη
διαμόρφωση) ή στο αντίστοιχο working directory (τοπική διαμόρφωση).&nbsp;
Τέλος, μπορούν να ξεκινήσουν πολλαπλοί clients, οι οποίοι εντοπίζουν μέσω
της λίστας διαθέσιμων serverID και του registry κάποιον διαθέσιμο server,
όπου και στέλνουν μια σειρά αιτήσεων. Η αναζήτηση σταματά μόλις επιστραφεί
η πρώτη θετική απάντηση, διαφορετικά σε περίπτωση αρνητικής απάντησης η
αίτηση αποστέλλεται σε κάποιον από τους υπόλοιπους servers. Οι περιπτώσεις
σφαλμάτων σύνδεσης ή επικοινωνίας αντιμετωπίζονται αυτόματα με μια σειρά
από μηχανισμούς timeout δύο επιπέδων (για τη λίστα των servers και για
κάθε server ξεχωριστά), με παραμέτρους που καθορίζονται στο SDGStimeout.
Για τη σύνδεση με τον server που επιλέχθηκε γίνονται 5 προσπάθειες, ενώ
για τη λήψη απάντησης γίνονται 3. Μεταξύ των επαναλήψεων μεσολαβεί ένα
σταθερό χρονικό διάστημα (100ms) συν ένα ακόμα τυχαίο χρονικό διάστημα
(0-200ms) για να αποφευχθούν περιπτώσεις διαδοχικών συγκρούσεων με άλλους
clients. Τελικά ο client λαμβάνει θετική απάντηση από τον server που έχει
τα ζητούμενα δεδομένα και θα απαντήσει πρώτος, ή η αίτηση αποτυγχάνει όταν
κανένας από τους ενεργούς servers (όσοι απάντησαν) δεν απάντησε θετικά.
Η αναζήτηση στην κατανεμημένη ΒΔ μπορεί να παρατηρηθεί εύκολα ακόμα και
σε τοπική διαμόρφωση ομάδας, θέτοντας τη μεταβλητή ελέγχου "verbose" στο
κύριο πρόγραμμα του client σε true, επιτρέποντας την εμφάνιση αναλυτικών
μηνυμάτων κατάστασης κατά την επικοινωνία του client με τους servers της
ομάδας.
<br>&nbsp;
<h2>
4. Τεχνικές Πληροφορίες</h2>

<h3>
4.1 Παρατηρήσεις</h3>

<ul>
<li>
Λόγω προβλημάτων στην δημιουργία διασυνδέσεων (RMI socket connections)
ακόμα και σε τοπικό επίπεδο, λόγω των αυστηρών περιορισμών που θέτει ο
κάθε SecurityManager, στην τελική εφαρμογή δεν χρησιμοποιείται ενεργός
RMISecurityManager.</li>

<li>
Στην έκδοση 1.2 του JDK υπάρχουν κάποιες διαφοροποιήσεις σχετικά με το
RMI API. Συγκεκριμένα, αντί του UnicastRemoteServer χρησιμοποιείται το
UnicastRemoteObject και αντί του StubSecurityManager το RMISecurityManager.</li>

<li>
Αν και η αναφορά της Sun σχετικά με το RMI API και το πρόγραμμα rmiregistry
αναφέρει ότι το remote stub μπορεί να μεταφέρεται αυτόματα στον client
χωρίς παρέμβαση από το χρήστη, παρόλα αυτά κάτι τέτοιο δεν φαίνεται να
λειτουργεί. Επιπλέον, κατά την εκκίνηση του rmiregistry ο τρέχον κατάλογος
πρέπει να είναι ο ίδιος με αυτόν που βρίσκονται όλα τα αρχεία του server
της εφαρμογής, γιατί σε διαφορετική περίπτωση δεν λειτουργεί το stub αρχείο
που χρησιμοποιείται από το registry.</li>
</ul>

<h3>
4.2 Ανάπτυξη</h3>
Περιβάλλον ανάπτυξης:
<ul>
<li>
O.S.:&nbsp; MS-Windows98, MS-WindowsNT, RedHat Linux 4.2</li>

<li>
Java:&nbsp; Sun's Java 2 JDK 1.2.2, Borland JBuilder v3.0, Guava/Kaffe
(GNU/Linux)</li>

<li>
H/W:&nbsp; iPentium/133-32MB, amdAthlon-K7/500-128MB, SunSPARC/station4-16MB</li>

<li>
Net:&nbsp; TCP/IP on EtherLAN, TCP/IP on PPP (both local &amp; remote)</li>
</ul>

<h3>
4.3 Βιβλιογραφία-Αναφορές</h3>

<ul>
<li>
"Hacking Java - The Java Professional's Resource Kit", Mark Wutka, QUE
- 1997.</li>

<li>
"Java Quick Reference", Michael Afergan, QUE - 1996.</li>

<li>
"White Paper: Java Remote Method Invocation - Distributed Computing for
Java", Sun Microsystems - 1999.</li>
</ul>

<p><br>
<hr WIDTH="100%">
<br>Last updated: 20-Jul-2000.
<br>Harris Georgiou
<br>&nbsp;
</body>
</html>
